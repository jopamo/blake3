‚öôÔ∏è  Generating test data (silently)...
üß™ Verifying correctness...
‚úÖ All checks passed.

# Benchmark Report

Generated by `bench-b3sum.sh`

## üßæ Benchmark Methodology

**Bench run timestamp:** `2025-12-17T22:47:04-06:00`

**Kernel:** `Linux 6.17.11 x86_64 GNU/Linux`

**CPU:** AMD Ryzen 9 5950X 16-Core Processor | CPUs: 32 | Sockets: 1 | Cores/socket: 16 | Threads/core: 2

**Git:**
- HEAD: `8c3ebb1852c5e81ab7f5d67b98fc8172912a6a7b`
- Commit date: `2025-12-17T21:02:10-06:00`
- Working tree: **dirty**

**Tools:** hyperfine 1.20.0

**Implementations:**
- **C:** `./build-meson-release/b3sum`
- **Rust:** `/usr/bin/b3sum_rust`

**Hyperfine settings:**
- Runs per command: **10**
- Warmup runs: **2**
- Shuffle order: **no**
- Thread count (system): `32`

**Cache / prepare step:**
- `sync`
- Behavior: OS page cache left intact

**Workloads:**
- **Large-file hashing:** 12 files sized **1 MiB, 2 MiB, 3 MiB, 4 MiB, 8 MiB, 16 MiB, 32 MiB, 64 MiB, 128 MiB, 256 MiB, 512 MiB, 1024 MiB** (each benchmark runs both C and Rust on the same file)
- **Tiny-file hashing:** **5000** files with per-file size roughly **1024..4096** bytes

**Data generation:**
- All test data is created in a temporary sandbox under `/tmp` and removed on exit
- Large files are created via `fallocate` when available, otherwise `dd if=/dev/urandom`
- Tiny files are created with `dd if=/dev/urandom` (1 block per file)

**Correctness checks (performed before benchmarking):**
- For every large file: compare the hash output from C and Rust (must match)
- For tiny files: produce full per-file outputs, normalize paths, sort, and `diff` (must match)

## üöÄ Benchmark Results

| Workload | C (ms) | Rust (ms) | Ratio (C/R) |
| :--- | :--- | :--- | :--- |
| 1 MiB |   1.385 |   4.611 | 0.300 |
| 2 MiB |   1.784 |   4.849 | 0.368 |
| 3 MiB |   1.839 |   5.147 | 0.357 |
| 4 MiB |   2.207 |   4.863 | 0.454 |
| 8 MiB |   3.592 |   5.299 | 0.678 |
| 16 MiB |   5.942 |   5.845 | 1.016 |
| 32 MiB |   6.964 |   6.999 | 0.995 |
| 64 MiB |   9.300 |   9.390 | 0.990 |
| 128 MiB |  12.625 |  13.341 | 0.946 |
| 256 MiB |  20.698 |  22.156 | 0.934 |
| 512 MiB |  36.665 |  40.259 | 0.911 |
| 1024 MiB |  72.927 |  77.412 | 0.942 |
| TinyFiles (5000) |  58.192 |  69.498 | 0.837 |

## üìå Key Results

- Hyperfine configuration: **10 runs**, **2 warmups**, results include **13 workloads**
- **4‚Äì32 MiB:** C is ~0.98√ó‚Äì2.20√ó faster (avg ratio 0.786)
- **64 MiB:** near parity (ratio 0.990)
- **128 MiB‚Äì1 GiB:** C ~5.7%‚Äì9.8% faster (avg ratio 0.933)
- **TinyFiles:** C is ~19.4% faster (ratio 0.837)

